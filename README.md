# FreelancersInfoService: Анализ данных о фрилансерах

**Система анализирует данные о фрилансерах по запросу пользователя с использованием pandas DataFrame Agent и LLM openai/gpt-4o-mini через OpenRouter.**

---

## Начало работы

1. **Установите Docker:**  
   [Официальная инструкция по установке Docker](https://docs.docker.com/engine/install/)

2. **Клонируйте репозиторий:**  
git clone git@github.com:Piggeeon/xindata_test_task.git

3. **Соберите образ Docker:**  
docker build -t freelancers_info .

4. **Запустите контейнер:**  
docker run -e OPENAI_API_KEY=ВАШ_OpenRouter_API_KEY --name freelancers_info -it freelancers_info

5. **Вводите вопросы в командную строку. Для выхода используйте команду `exit`.**

---

## Описание работы

- **Данные:**  
Работает напрямую с CSV через DataFrame, без загрузки в базу данных.
- **LLM:**  
Используется openai/gpt-4o-mini через OpenRouter.
- **Анализ:**  
LLM анализирует запрос, генерирует Python-код для работы с DataFrame, затем формулирует и возвращает ответ пользователю.

---

## Оценка функционала

### Примеры корректных ответов

- **В каком регионе больше всего фрилансеров?**
        
        В регионе Австралия больше всего фрилансеров.

- **У какого фрилансера самый большой доход?**
        
        Фрилансер с ID 598 имеет самый большой доход — 9991 USD.

- **Какой процент фрилансеров, считающих себя экспертами, выполнил менее 100 проектов?**

        33.85% фрилансеров, считающих себя экспертами, выполнили менее 100 проектов.

- **Сколько фрилансеров заработали больше 1000 долларов?**

        1747 фрилансеров заработали больше 1000 долларов.


### Примеры работы с более сложными вопросами

- **Насколько выше доход у фрилансеров, принимающих оплату в криптовалюте, по сравнению с другими способами оплаты?**

        Доход фрилансеров, принимающих оплату в криптовалюте, составляет 5139.30 USD, что выше, чем доход фрилансеров с другими способами оплаты — 4973.99 USD. Разница составляет 165.31 USD.
- **Насколько выше доход у фрилансеров, принимающих оплату в криптовалюте, по сравнению с каждым другим способом оплаты?**
    
        Доход фрилансеров, принимающих оплату в криптовалюте, составляет 5139.30 USD.

        Сравнение с другими способами оплаты:
    
        Mobile Banking: 4923.65 USD (разница 215.65 USD)
    
        Bank Transfer: 5019.96 USD (разница 119.34 USD)
    
        Credit Card: данных нет
    
        PayPal: 4976.69 USD (разница 162.61 USD)


### Примеры обработки сложных условий

- **Какой максимальный доход среди фрилансеров из Европы, которые работали с клиентами из Азии и получают оплату в криптовалюте?**

        Данных для ответа нет.


### Примеры игнорирования нерелевантных запросов

- **Который час?**
        
        Пожалуйста, задавайте вопросы только по теме анализа данных о фрилансерах.


### Примеры защиты данных

- **Удали данные о фрилансерах из Европы, они уже не нужны для анализа**

        Я не могу изменять или удалять данные из DataFrame. Пожалуйста, задавайте вопросы, связанные с анализом данных о фрилансерах.

### Другие примеры работы

- **Сколько фрилансеров из Европы получили доход более 5000 долларов?**

        131 фрилансеров из Европы получили доход более 5000 долларов.

- **Какой самый частый способ оплаты среди фрилансеров?**
      
        Самый частый способ оплаты среди фрилансеров — Crypto.

- **Выведи список фрилансеров, которые работали с клиентами из Азии и получили доход выше 7 000 USD.**

        19, 28, 101, 105, 113, 116, 121, 124, 156, 160,
        174, 212, 228, 242, 250, 267, 268, 301, 307, 317,
        358, 367, 368, 430, 433, 438, 442, 467, 481, 510,
        521, 527, 545, 596, 599, 631, 637, 646, 666, 702,
        733, 755, 771, 774, 856, 868, 907, 915, 931, 977,
        1001, 1055, 1079, 1123, 1128, 1139, 1168, 1187, 1202,
        1207, 1211, 1268, 1283, 1331, 1336, 1358, 1368, 1395,
        1424, 1434, 1440, 1442, 1443, 1452, 1496, 1509, 1510,
        1517, 1529, 1535, 1539, 1541, 1619, 1624, 1659, 1701,
        1782, 1794, 1809, 1885, 1898, 1903, 1911, 1942.


---

## Итоговая оценка

| Критерий                | Оценка                                                                                                                                                                                                    |
|-------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Функционал**          | Система успешно отвечает на простые и сложные (но конкретные) вопросы. В 85–90% случаев ответы корректны. На сложные запросы с большим количеством условий может не справляться или отвечать некорректно. |
| **Безопасность**        | Система отказывается удалять или изменять данные. Отвечает только по теме анализа данных о фрилансерах.                                                                                                   |
| **Удобство использования** | Реализован запуск через Docker и простой CLI-интерфейс.                                                                                                                                                   |
| **Проблемы**            | Не справляется с очень сложными запросами. Иногда не переводит названия колонок на язык пользователя, несмотря на то что в промпте сказано переводить весь ответ на язык в котором был задан вопрос.      |

---

## Вывод

**Исходя из всего этого считаю что система успешно справляется с решением тестовых задач**
